프로그램은 어떻게 프로세스로 변환될까?

구체적으로, OS는 어떻게 프로그램을 시작하고 실행할까?

**OS가 프로그램을 실행하기 위해 가장 먼저 해야 할 일은 코드와 정적 데이터(예: 초기화된 변수)를 프로세스의 address space로 메모리에 로드하는 것이다.**

**무언가를 실행하기 전에 OS는 디스크에서 메모리로 중요한 프로그램 비트를 가져와야 한다.**

**일부 메모리는 프로그램의 런타임 스택에 할당되어야 한다.**

C 프로그램은 로컬 변수, 함수 매개변수 및 반환 주소를 위해 스택을 사용한다.

OS는 이 메모리를 할당하고 프로세스에 제공한다.

**또한 OS는 프로그램의 힙에 일부 메모리를 할당한다.**

C 프로그램에서 힙은 명시적으로 요청된 동적으로 할당된 데이터에 사용된다.

프로그램은 malloc()을 호출하여 메모리 공간을 요청하고 free()를 호출하여 명시적으로 메모리 공간을 해제한다.

힙은 연결 리스트, 해시 테이블, 트리와 같은 데이터 구조에 필요하다.

힙은 처음에는 작을 것이다. 프로그램이 실행되고 malloc() 라이브러리 API를 통해 더 많은 메모리를 요청함에 따라 OS가 개입하여 프로세스에 더 많은 메모리를 할당하여 그러한 호출을 만족시킬 수 있다.

**OS는 특히 입력/출력 (I/O)과 관련된 몇 가지 다른 초기화 작업도 수행한다.**

예를 들어, UNIX 시스템에서 각 프로세스는 기본적으로 표준 입력, 출력 및 오류를 위해 세 개의 열린 파일 설명자(file descriptor)를 가지고 있다.

이러한 설명자를 사용하면 프로그램이 터미널에서 입력을 쉽게 읽고 화면에 output을 출력할 수 있다.

**코드와 정적 데이터를 메모리에 로드하고, 스택을 생성 및 초기화하고, I/O 설정과 관련된 다른 작업을 수행함으로써, OS는 이제 (마침내) 프로그램 실행을 위한 무대를 마련했다.**

마지막 작업이 하나 있다. 진입점, 즉 main()에서 실행되는 프로그램을 시작하는 것이다.

main() 루틴으로 이동함으로써, OS는 CPU의 제어를 새로 생성된 프로세스로 이전하고 프로그램이 실행을 시작한다.
