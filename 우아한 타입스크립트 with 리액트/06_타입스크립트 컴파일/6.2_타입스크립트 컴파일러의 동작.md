타입스크립트 컴파일러의 역할을 크게 2가지로 나눌 수 있다.

1. 코드의 타입 오류를 검사한다.
2. 최신 버전의 타입스크립트·자바스크립트 코드를 구버전의 자바스크립트로 트랜스파일한다.

> 타입스크립트 컴파일러와 바벨의 차이는 뭘까?
>
> tsc와 바벨은 소스코드를 ES5 이하의 자바스크립트 코드로 컴파일해준다는 점에서는 동일하다.
>
> 하지만 tsc와 달리 바벨은 타임 검사를 하지 않는다.
>
> 최신 버전의 자바스크립트 코드를 낮은 버전으로 컴파일하는 것이 바벨의 주된 역할이다.

## 1. 코드 검사기로서의 타입스크립트 컴파일러

컴파일타임에 문법 에러와 타입 관련 에러를 모두 검출한다.

## 2. 코드 변환기로서의 타입스크립트 컴파일러

타입스크립트 컴파일러의 target 옵션을 사용하여 특정 버전의 자바스크립트 소스코드로 컴파일할 수 있다.

여기에서는 ES5로 설정했다.

타입스크립트 컴파일러는 타입 검사를 수행한 후 코드 변환을 시작하는데, 이때 타입 오류가 있더라도 일단 컴파일을 진행한다.

타입스크립트 코드가 자바스크립트 코드로 변환되는 과정은 타입 검사와 독립적으로 동작하기 때문이다.

```typescript
interface Square {
  width: number;
}

interface Rectangle extends Square {
  height: number;
}

type Shape = Square | Rectangle

function calculateArea(shape: Shape) {
  if (shape instanceof Rectangle) {
    // Error: 'Rectangle' only refers to a type, but is being used as a value here.
    return shape.width * shape.height
    // Error: Property 'height' does not exist on type 'Shape'.
    // Error: Property 'height' does not exist on type 'Square'.
  } else {
    return shape.width * shape.width
  }
}
```

instanceof 체크는 런타임에 실행되지만 Rectangle은 타입이기 때문에 자바스크립트 런타임은 해당 코드를 이해하지 못한다.

타입스크립트 코드가 자바스크립트로 컴파일되는 과정에서 모든 인터페이스, 타입, 타입 구문이 제거되어 버리기 때문에 런타임에서는 타입을 사용할 수 없다.

