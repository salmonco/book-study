## 불변 객체를 만드는 간단한 방법

- 참조형 데이터의 '가변'은 데이터 자체가 아닌 내부 프로퍼티를 변경할 때만 성립한다.
- 데이터 자체를 변경하고자 하면(새로운 데이터를 할당하고자 하면) 기본형 데이터와 마찬가지로 기존 데이터는 변하지 않는다.
- 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우가 종종 발생한다. 이때 불변 객체가 필요하다.
- 변경 전과 후에 서로 다른 객체를 바라보게 만들어야 한다.

## 얕은 복사와 깊은 복사

- 얕은 복사는 바로 아래 단계의 값만 복사하는 방법이고,
- 깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.
- 어떤 객체를 복사할 때 객체 내부의 모든 값을 복사해서 완전히 새로운 데이터를 만들고자 할 때, 객체의 프로퍼티 중에서 그 값이 기본형 데이터일 경우에는 그대로 복사하면 되지만 참조형 데이터는 다시 그 내부의 프로퍼티들을 복사해야 한다.
  - 이 과정을 참조형 데이터가 있을 때마다 재귀적으로 수행해야만 비로소 깊은 복사가 된다.
 
```javascript
const copyObjectViaJSON = (target) => {
  return JSON.parse(JSON.stringify(target))
}

const obj = {
  a: 1,
  b: {
    c: null,
    d: [1, 2],
    func1() { console.log(3) }
  },
  func2() { console.log(4) }
}

const obj2 = copyObjectViaJSON(obj)

obj2.a = 3
obj2.b.c = 4
obj.b.d[1] = 3

console.log(obj) // { a: 1, b: { c: null, d: [1, 3], func1: f() }, func2: f() }
console.log(obj2) // { a: 3, b: { c: 4, d: [1, 2] } }
```
- 간단하게 깊은 복사를 처리할 수 있는 방법 중 하나는, 객체를 JSON 문법으로 표현된 문자열로 전환했다가 다시 JSON 객체로 바꾸기
- 다만 메서드(함수)나 숨겨진 프로퍼티인 __proto__나 getter/setter 등과 같이 JSON으로 변경할 수 없는 프로퍼티들은 모두 무시한다.
