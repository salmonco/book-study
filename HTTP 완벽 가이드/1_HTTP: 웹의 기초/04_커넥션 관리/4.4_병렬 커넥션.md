앞에서 언급했듯이 브라우저는 HTML 페이지에 이어 첫 번째 첨부된 객체, 두 번째 첨부된 객체를 하나씩 내려받는 식으로 웹페이지를 보여줄 수 있다.

하지만 이 방식은 너무 느리다!

HTTP는 클아이언트가 여러 개의 커넥션을 맺음으로써 여러 개의 HTTP 트랜잭션을 병렬로 처리할 수 있게 한다.

이 예에서는 네 개의 이미지를, 할당받은 각 TCP 커넥션상의 트랜잭션을 통해 병렬로 내려받는다.

## 1. 병렬 커넥션은 페이지를 더 빠르게 내려받는다

단일 커넥션의 대역폭 제한과 커넥션이 동작하지 않고 있는 시간을 활용하면, 객체가 여러 개 있는 웹페이지를 더 빠르게 내려받을 수 있을 것이다.

하나의 커넥션으로 객체들을 로드할 때의 대역폭 제한과 대기 시간을 줄일 수 있다면 더 빠르게 로드할 수 있을 것이다.

**각 커넥션의 지연 시간을 겹치게 하면 총 지연 시간을 줄일 수 있고, 클라이언트의 인터넷 대역폭을 한 개의 커넥션이 다 써버리는 것이 아니라면 나머지 객체를 내려받는 데에 남은 대역폭을 사용할 수 있다.**

<img width="500" alt="" src="https://github.com/user-attachments/assets/114df2ee-49ea-4c72-a64e-d1cad5e84f3f" />

위 그림은 병렬 커넥션 방식을 개략적으로 보여주는데, 일반 커넥션보다 월등히 빠른 것을 볼 수 있다.

**HTML 페이지를 먼저 내려받고 남은 세 개의 트랜잭션이 각각 별도의 커넥션에서 동시에 처리된다.**

**이미지들을 병렬로 내려받아 커넥션 지연이 겹쳐짐으로써 총 지연시간이 줄어든다.**

## 2. 병렬 커넥션이 항상 더 빠르지는 않다

병렬 커넥션이 일반적으로 더 빠르기는 하지만, 항상 그렇지는 않다.

**클아이언트의 네트워크 대역폭이 좁을 때(예를 들어, 브라우저가 28.8Kbps 모뎀으로 인터넷에 연결되어 있는 경우)는 대부분 시간을 데이터를 전송하는 데만 쓸 것이다.**

여러 개의 객체를 병렬로 내려받는 경우, 이 제한된 대역폭 내에서 각 객체를 전송받는 것은 느리기 때문에 성능상의 장점은 거의 없어진다.

**또한 다수의 커넥션은 메모리를 많이 소모하고 자체적인 성능 문제를 발생시킨다.**

복잡한 웹페이지는 수십 개에세서 수백 개의 객체를 포함한다.

클라이언트가 수백 개의 커넥션을 열 수도 있겠지만, 서버는 다른 여러 사용자의 요청도 함께 처리해야 하기 때문에 수백 개의 커넥션을 허용하는 경우는 드물다.

**백 명의 가상 사용자가 각각 100개의 커넥션을 맺고 있다면, 서버는 총 10,000개의 커넥션을 떠안게 되는 것이다.**

**이는 서버의 성능을 크게 떨어뜨린다.**

이런 상황은 고부하 프락시에서도 동일하게 발생할 수 있다.

**브라우저는 실제로 병렬 커넥션을 사용하긴 하지만 적은 수(대부분 4개)의 병렬 커넥션만을 허용한다.**

서버는 특정 클라이언트로부터 과도한 수의 커넥션이 맺어졌을 경우, 그것을 임의로 끊어버릴 수 있다.

## 3. 병렬 커넥션은 더 빠르게 '느껴질 수' 있다

병렬 커넥션이 페이지를 항상 더 빠르게 로드하지는 않는다.

**병렬 커넥션이 실제로 페이지를 더 빠르게 내려받는 것은 아니지만, 화면에 여러 개의 객체가 동시에 보이면서 내려받고 있는 상황을 볼 수 있기 때문에 사용자는 더 빠르게 내려받고 있는 것처럼 느낄 수 있다.**

사실 사람들은 페이지의 총 다운로드 시간이 더 걸린다 하더라도, 화면 전체에서 여러 작업이 일어나는 것을 눈으로 확인할 수 있으면 그것을 더 빠르다고 여긴다.
