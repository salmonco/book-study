1. 메시지는 시작줄, 헤더 블록, 본문 이렇게 세 부분으로 이루어진다.

2. 시작줄은 이것이 어떤 메시지인지 서술하며, 헤더 블록은 속성을, 본문은 데이터를 담고 있다.

3. 시작과 헤더는 그냥 줄 단위로 분리된 아스키 문자열이다.

4. 각 줄은 캐리지 리턴(ASCII 13)과 개행 문자(ASCII 10)로 구성된 두 글자의 줄바꿈 문자열로 끝난다. 이 줄바꿈 문자열은 'CRLF'라고 쓴다. (\r\n)

5. 엔티티 본문이나 메시지 본문은 단순히 선택적인 데이터 덩어리다. 시작줄이나 헤더와는 달리, 본문은 텍스트나 이진 데이터를 포함할 수도 있고 그냥 비어있을 수도 있다.

<img width="500" alt="" src="https://github.com/user-attachments/assets/1c580b20-c6d9-4ec3-bd39-f8b12e76d71a" />

### 메시지 문법

모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류된다.

요청 메시지의 형식은 다음과 같다.

```
<메서드> <요청 URL> <버전>
<헤더>

<엔티티 본문>
```

응답 메시지의 형식은 다음과 같다.

```
<버전> <상태 코드> <사유 구절>
<헤더>

<엔티티 본문>
```

각 부분에 대한 설명은 다음과 같다.

- 메서드: 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작이다. 'GET', 'HEAD', 'POST'와 같이 한 단어로 되어 있다.
- 요청 URL: 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소다.
- 버전: 이 메시지에서 사용 중인 HTTP 버전이다. `HTTP/<메이저>.<마이너>`
- 상태 코드: 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자다. 각 코드의 첫 번째 자릿수는 상태의 일반적인 분류('성공', '에러' 등)을 나타낸다.
- 사유 구절: 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구로, 상태 코드 이후부터 줄바꿈 문자열까지가 사유 구절이다. 사유 구절은 오로지 사람에게 읽히기 위한 목적으로만 존재하는 것이다.
- 헤더들: 이름, 콜론(:), 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들. 이 헤더의 목록은 빈 줄(CRLF)로 끝나 헤더 목록의 끝과 엔터티 본문의 시작을 표시한다.
- 엔터티 본문: 임의의 데이터 블록을 포함한다. 모든 메시지가 엔터티 본문을 갖는 것은 아니므로, 때때로 메시지는 그냥 CRLF로 끝나게 된다.

### 시작줄

1. 모든 HTTP 메시지는 시작줄로 시작한다.

2. 요청 메시지의 시작줄은 무엇을 해야 하는지 말해준다.

3. 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다.

`요청줄`

- 요청 메시지는 서버에게 리소스에 대해 무언가를 해달라고 부탁한다.
- GET /test/hi-there.txt HTTP/1.1
- HTTP/1.0 이전에는 요청줄에 HTTP 버전이 들어있을 필요가 없었다.

`응답줄`

- 응답 메시지는 수행 결과에 대한 상태 정보와 결과 데이터를 클라이언트에게 돌려준다.
- HTTP/1.1 200 OK
- HTTP/1.0 이전에는 응답에 응답줄이 들어있을 필요가 없었다.

`메서드`

- 요청의 시작줄은 메서드로 시작하며, 서버에게 무엇을 해야 하는지 말해준다.
- 메서드에 따라 요청 메시지에 본문이 있는 경우도 있고 그렇지 않은 경우도 있다.
- 모든 서버가 아래 표의 메서드를 모두 구현한 것은 아니라는 점에 주의하라.

<img width="600" alt="" src="https://github.com/user-attachments/assets/806c9896-eb65-4138-ac8c-63088c090efb" />

`상태 코드`

- 상태 코드는 클라이언트에게 무엇이 일어났는지 말해준다.
- 숫자로 된 코드는 프로그램이 에러를 처리하기 쉽다.
- 상태 코드들은 세 자리 숫자로 된 그들의 코드값을 기준으로 묶인다.

<img width="500" alt="" src="https://github.com/user-attachments/assets/fd52416c-7a4e-4391-b57a-5ed704892e9d" />

`사유 구절`

- 사유 구절은 응답 시작줄의 마지막 구성요소다.
- 상태 코드에 대한 글로 된 설명을 제공한다.
- 상태 코드와 일대일로 대응된다.

`버전 번호`

- 버전 번호는 HTTP/x.y 형식으로 요청과 응답 메시지 양쪽 모두에 기술된다.
- 버전 번호는 HTTP로 대화하는 애플리케이션들에게 대화 상대의 능력과 메시지의 형식에 대한 단서를 제공해주기 위한 것이다.
- HTTP 버전 1.1 애플리케이션과 대화하는 HTTP 버전 1.2 애플리케이션은 1.2 버전의 새로운 기능을 사용할 수 없다는 것을 알아야 한다.
- **응답의 프로토콜 버전이 HTTP/1.1이라는 것은 사실 응답을 보낸 애플리케이션이 HTTP/1.1까지 이해할 수 있음을 의미하는 것이다.**
- HTTP/2.22는 HTTP/2.3보다 크다. 왜냐하면 22는 3보다 큰 숫자이기 때문이다.

### 헤더

1. HTTP 헤더 필드는 요청과 응답 메시지에 추가 정보를 더한다.
2. 그들은 기본적으로 이름/값 쌍의 목록이다.
3. `Content-length: 19` 헤더줄은 Content-length 헤더 필드에 19라는 값을 할당한다.

`헤더 분류`

- HTTP 헤더 명세는 여러 헤더 필드를 정의한다.
- 애플리케이션은 또한 자유롭게 자신만의 헤더를 만들어낼 수 있다.
- HTTP 헤더는 다음과 같이 분류된다.

`일반 헤더`

- 요청과 응답 양쪽에 모두 나타날 수 있음

`요청 헤더`

- 요청에 대한 부가 정보를 제공

`응답 헤더`

- 응답에 대한 부가 정보를 제공

`Entity 헤더`

- 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술

`확장 헤더`

- 명세에 정의되지 않은 새로운 헤더

### 엔터티 본문

1. HTTP 메시지의 세 번째 부분은 선택적인 엔터티 본문이다.
2. 엔터티 본문은 HTTP 메시지의 화물이라고 할 수 있다.
3. HTTP 메시지는 이미지, 비디오, HTML 문서, 소프트웨어 애플리케이션, 신용카드 트랜잭션, 전자우편 등 여러 종류의 디지털 데이터를 실어 나를 수 있다.

### 버전 0.9 메시지

1. HTTP 버전 0.9는 HTTP 프로토콜의 초기 버전이다.
2. HTTP/0.9 메시지도 마찬가지로 요청과 응답으로 이루어져 있지만, 요청은 그저 메서드와 요청 URL을 갖고 있을 뿐이며, 응답은 오직 엔터티로만 되어 있다.
3. 버전 정보도 없고(그 시절엔 최초이자 유일한 버전이었다), 상태 코드나 사유 구절도 없으며, 헤더도 포함되어 있지 않다.
